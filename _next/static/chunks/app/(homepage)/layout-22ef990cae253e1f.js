(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[531],{51374:(e,t,r)=>{Promise.resolve().then(r.bind(r,69385)),Promise.resolve().then(r.bind(r,71041))},69385:(e,t,r)=>{"use strict";r.d(t,{ChatList:()=>i});var s=r(95155),a=r(71041);let l=(0,r(14057).A)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),i=()=>{let{chatSessions:e,activeSessionId:t,createNewSession:r,setActiveSessionId:i}=(0,a.Y)();return(0,s.jsxs)("div",{className:"space-y-4 w-full h-full overflow-y-auto ",children:[(0,s.jsxs)("button",{onClick:r,className:"w-full flex items-center gap-2 p-2 text-white bg-blue-500 hover:bg-blue-600 rounded-md transition",children:[(0,s.jsx)(l,{className:"w-5 h-5"}),"新建会话"]}),(0,s.jsx)("div",{className:"space-y-2",children:e.slice().sort((e,t)=>t.createdAt-e.createdAt).map(e=>{var r,a;return(0,s.jsx)("button",{onClick:()=>i(e.id),className:"w-full p-2 text-left rounded-md transition ".concat(t===e.id?"bg-gray-700 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"),children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"overflow-hidden text-ellipsis whitespace-nowrap",children:"string"==typeof(null===(r=e.messages[0])||void 0===r?void 0:r.content)?null===(a=e.messages[0])||void 0===a?void 0:a.content:"新会话"}),(0,s.jsx)("span",{className:"text-xs text-gray-400",children:new Date(e.createdAt).toLocaleTimeString()})]})},e.id)})})]})}},71041:(e,t,r)=>{"use strict";r.d(t,{ChatProvider:()=>i,Y:()=>n});var s=r(95155),a=r(12115);let l=(0,a.createContext)(void 0);function i(e){let{children:t}=e,[r,i]=(0,a.useState)([]),[n,o]=(0,a.useState)(null);(0,a.useEffect)(()=>{c()},[]);let c=()=>{let e={id:Date.now().toString(),createdAt:Date.now(),messages:[]};i(t=>[...t,e]),o(e.id)};return(0,a.useEffect)(()=>{let e=localStorage.getItem("chatSessions");e&&i(JSON.parse(e))},[]),(0,a.useEffect)(()=>{localStorage.setItem("chatSessions",JSON.stringify(r))},[r]),(0,s.jsx)(l.Provider,{value:{chatSessions:r,activeSessionId:n,createNewSession:c,addMessage:(e,t)=>{i(r=>r.map(r=>r.id===e?{...r,messages:[...r.messages,t]}:r))},setActiveSessionId:o},children:t})}let n=()=>{let e=(0,a.useContext)(l);if(!e)throw Error("useChat must be used within a ChatProvider");return e}},14057:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var s=r(12115);let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(0,s.forwardRef)((e,t)=>{let{color:r="currentColor",size:a=24,strokeWidth:n=2,absoluteStrokeWidth:o,className:c="",children:d,iconNode:u,...h}=e;return(0,s.createElement)("svg",{ref:t,...i,width:a,height:a,stroke:r,strokeWidth:o?24*Number(n)/Number(a):n,className:l("lucide",c),...h},[...u.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...Array.isArray(d)?d:[d]])}),o=(e,t)=>{let r=(0,s.forwardRef)((r,i)=>{let{className:o,...c}=r;return(0,s.createElement)(n,{ref:i,iconNode:t,className:l("lucide-".concat(a(e)),o),...c})});return r.displayName="".concat(e),r}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,517,358],()=>t(51374)),_N_E=e.O()}]);